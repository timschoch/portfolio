$_spriteTopOffset: px( $navLineHeight ) - 60px;
$_spriteLeftOffset: px( $navIndent ) - 50px;

// --- default nav styling --- //
nav {
	position: relative;

	ul {
		position: relative;
	}

	li {
		position: relative;
		height: $navLineHeight;
		margin: 0;

		line-height: $navLineHeight;
		&:before,
		&:after {
			@extend %light;
			display: none;
			font-style: normal;
		}
	}

	a {
		color: $fontColor;
		text-decoration: none;

		&:hover {
			color: $fontHeavyColor;
		}

		&:before,
		&:after {
			@extend %light;
			display: none;
			font-style: normal;
		}
	}

	// current navigation
	li.selected a {
		color: $corporateColor;
	}

	// upcomming navigation
	li.selected ~ li a {
		color: $lightFontColor;
	}
	ul.waterdrop {
		display: none;
	}
}

// --- desktop nav --- //
$dotWidth: 40%; // for blur depth 5
$liBackgroundColor: white;
$inactiveFontColor: mix( white, $lightFontColor, $lightOpacity * 100 );
nav {
	@include bp-large {
		>div:first-child {
			position: absolute;
			width: 1px;
			border-radius: 1px;
			background-color: $lightFontHeavyColor;
			height: $navLineHeight * 5;
			margin-left: $navIndent * -1;
			overflow: hidden;
			> span {
				display: block;
				width: 100%;
			}
			> span:first-child {
				height: 0; //$navLineHeight*6;
				background-color: $lightFontHeavyColor;
			}
			> span:last-child {
				height: 100%;
				background-color: $inactiveFontColor;
			}
		}
		ul {
			display: inline-block !important;
			float: left;
		}
		li {
			position: relative;
			height: $navLineHeight;
			margin-left: $navIndent;

			line-height: $navLineHeight;
			background-color: $liBackgroundColor;
		}

		// current navigation
		li.selected {
			div:before {
				//background-color: $corporateColor;
				//color: $corporateColor;
			}
		}

		// upcomming navigation
		li.selected ~ li {
			&:before {
				//background-color: transparent;
				//color: transparent;
			}
		}

		// --- blobbs --- //
		ul.waterdrop {
			margin-left: $navIndent * -1;
			filter: url("#water");
			-webkit-filter: url("#water");
			overflow: hidden;

			li {
				display: block;
				position: relative;
				width: $navLineHeight; 
				height: $navLineHeight; 
				background-color: transparent;
				display: -webkit-flex;
			    display: flex;
			    -webkit-flex-wrap: wrap;
			    flex-wrap: wrap;
			    -webkit-align-content: center;
			    align-content: center;
			    z-index: 2;

				&:before {
					content: "";
				}
				div {
					position: absolute;
				    top: 50%;
				    left: 50%;
				    height: $dotWidth;
				    width: $dotWidth;
				    margin: -0.5*$dotWidth 0 0 -0.5*$dotWidth;
					border-radius: 100%;
					background-color: $lightFontHeavyColor;
				}
				&.selected ~ li div {
					background-color: $inactiveFontColor;
				}
				&.waterdrop {
					position: absolute;
					background-color: transparent;
					top: 0;
					z-index: 3;
				}
				&.waterdrop div {
					background-color: $corporateColor;
					//transform: scale(1.2, 1.2);
				}
			}
		}

		// current blobb
		// &:before {
		// 	content: "";
		// 	display: block;
		// 	position: absolute;
		// 	height: $navLineHeight;
		// 	width: $navIndent;
		// 	background-color: $fontHeavyColor;
		// }
	}
}

// --- tablet and mobile nav --- //
nav {
	@include bp-small {
		margin-left: $gridGutterWidth;

		ul {
			margin: 0;

			li {
				display: inline-block;
				overflow: hidden;
				max-width: 0;

				text-align: right;
				line-height: $navSmallInnerHeight;
				white-space: nowrap;

				transition: max-width .5s;

				a {
					float: right;
					height: $navSmallInnerHeight;
					margin: 0 rem( 5px );

					white-space: nowrap;

					&:before,
					&:after {
						content: "«";
						display: inline-block;
						padding: 0;
						margin: 0;
					}
					&:before {
						padding-right: rem( 10px );
						text-align: left;
					}
					// past navigations (these is the default state as there is now prev sibling selector in css
					&:after {
						content: "»";
						display: none;
						padding-left: rem( 10px );
						text-align: right;
					}
				}
				// hide arrows on first and last element
				&:first-child a:before,
				&:last-child a:after {
					display: none;
				}
			}

			// prev navigation
			li.prev {
				max-width: rem( 147px );
				transition: max-width .5s;
			}

			// current navigation
			li.selected {
				max-width: rem( 147px );
				transition: max-width .5s;
				a {
					color: $corporateColor;

					&:before,
					&:after {
						display: inline-block;
					}
				}
				&:first-child a:before,
				&:last-child a:after {
					display: none;
				}
			}

 			// next navigation
			li.selected + li {
				max-width: rem( 147px );
				//transition: max-width .5s;
			}

			// upcomming navigation
			li.selected ~ li {
				a:before {
					display: none;
				}
				a:after {
					display: inline-block;
				}
				&:last-child a:after {
					display: none;
				}
			}




			// upcomming navigation
			// li.selected ~ li {
			// 	display: inline-block;
			// }
		}
	}
}
// --- tablet and mobile nav --- //
nav {
	@include bp-xsmall {
		margin-left: $gridGutterWidth * 0.5;
	}
}

// --- Logo --- //
.logo {
	display: block;
	margin-top: $gridGutterHeight;
	height: $gridBaseLineHeight * 4;

	text-indent: -10000px;

	background:  url( '../images/forscher.png' );
	background-position: 13px center; // optically align with navigation
	background-repeat: no-repeat;
	background-size: contain;

	@include bp-small {
		flex-shrink: 0;
		margin-top: 0;
		margin-left: $gridGutterWidth * 0.25;
		height: 100%;
		width: rem( 45px );

		background-size: cover;
		background-position: top center;
	}

	@include bp-xsmall {
		margin-left: 0;
	}
}